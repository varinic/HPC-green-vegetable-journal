## 初步了解超算系统
最近去超算中心实习，初步了解了太湖神威系统的使用。

太湖神威支持C/C++/Fortran,有多个编译器版本，C用sw5cc<br>
### 用法： 
1. 主核代码 sw5cc -host [选项] 文件名
1. 从核代码  sw5cc -slave [选项] 文件名
1. 混合链接  sw5cc -hybrid [选项] 主核文件名 从核文件名
1. 混合链接生成的文件才可在主从核上运行

提交要用提交队列，不要在登陆节点运行代码，每个账户有免费运行队列q_sw_expr和q_x86_expr，分别对应申威处理器和x86处理器。<br>
用法： 向高速计算系统队列 q_sw_expr 中提交互式作业 myjob，该作业共使用 64 个主核并行，每个主核带 64 从核：<br>
	`bsub –I –q q_sw_expr –n 64 –cgsp 64 ./myjob`

优化会用到openACC、mpi、AThread等。<br>
openACC代码用swacc编译，mpi用mpicc<br>

接下来要学习openACC和官方加速库AThread了。

### 18.1.14
最近填了好多坑，其中一个不管是mpi还是athread中都会出现的是 千万别图省力而忘了给申请的空间初始化 特别是float和double型
数组，不像int可以用memset初始化，每次都要手动初始化。C++中还可以用fill库函数，C嘛。。。emmmmm 还是自己写个fill函数 每次
调用一下。<br>
为什么说这个是坑，因为一旦出错了，神威系统可不会告诉你具体哪出错了。而且出错的提示有时候也是不准确的。
像mpi，每个主核都会给你一个出错信息，但是你不会知道出错的具体位置。
而athread，也不会告诉你。从核从硬件上就不支持中断，所以也没法单步调试，官方文档也是建议用打印print的方式调试程序。

## 下面给出一些debug的trick
首先athread，像上面说的，用print。可以print某一个线程，如0号线程。
mpi，如果使用gdb调试工具，需要管理员权限。。。好吧，还是老老实实print吧。不过，mpi可以通过在程序中间任意位置插入return 0
让程序提前正常结束的方式来查找出错的地方。比方说100行出错，你却不知道。那么，首先在50行处，加一行return 0，如果程序正常结束，
可想而知，前50行没问题。根据二分算法，最多查找log(行数)次。当然，实际情况可以某些地方着重检查。


